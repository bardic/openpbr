# OpenPBR

OpenPBR is software that makes creating PBR packs for Minecraft easier. It does this by downloading the latest textures from the Majong assets repo and uses Imagemagick, Nvidia Texture tools and pngcrush to automatically create Height maps, Normal Maps and MER files.

This software also supports easily adding custom MER via a folder of PSDs that are exported to PNG during build.

Packages produced by this project

**REQUIRE MINECRAFT PREVIEW OR BETTER RENDER DRAGON**

Packages include:

- Tweaked sky colors (UNDER CONSTRUCTION)
- Emissive Ores
- Lighting Tweaks (UNDER CONSTRUCTION)
- Hables tone-mapping
- Vanilla Block Assets + Heightmaps and MER
- Vanilla Block Assets + Normals and MER
- Upscaling (UNDER CONSTRUCTION)

## Requirements

- [Imagemagick](https://imagemagick.org/)
- *[NVIDIA Texture Tools Exporter](https://developer.nvidia.com/texture-tools-exporter)
- *[pngcrush](https://pmt.sourceforge.io/pngcrush/)

These tools must be accessible via your PATH env. 

Depending on your version of ImageMagick you may need to modify utils.go 

* only needed if you use that flag

`const IM_CMD = "magick"` to use `convert` instead.  This will be configurable in v3

## Run locally

- Download latest release
- `openpbr build`

## CLI Options

```
go run . build -h
build pack

Usage:
  openpbr build [flags]

Flags:
  -b, --beta             Perform image manipulation
  -c, --crush            Uses PNGCrush to reduce file size
  -d, --delete           Delete all autogenerated files from working dir
  -h, --help             help for build
  -n, --normal           Generate normals instead of height maps
  -s, --skip             Skip downloading assets zip
  -v, --version string   set to 1.21.30 for new format
  -z, --zip              Skips build and repackages existing output
```

## Build locally

Requires [Golang](https://go.dev/doc/install)

`env GOOS=windows GOARCH=amd64 go build .`

## TODO

- Better defaults for sky colors/lightning/fog
- Better support for format 1.21.30
- Subpackage support
- GUI
- Configurable workspace via Viper
